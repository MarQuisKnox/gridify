$.fn.extend({imageLoaded:function(n){var i=$(this).find("img"),a=i.length;0==a&&n(),i.each(function(i,t){var t=new Image;t.onload=function(){a--,0==a&&n()},t.onerror=function(){a--,0==a&&n()},t.src=$(t).attr("src")})},gridify:function(n){var i=$(this),n=n||{},a=function(){i.css("position","relative");var a=i.find(n.srcNode),t=i.innerWidth(),r=parseInt(n.margin||0),e=parseInt(n.max_width||n.width||220),o=Math.floor(t/(e+r)),s=t%(e+r)/2,d=[];n.max_width&&(e=(t-o*r-r)/o,s=r/2);for(var f=0;o>f;f++)d.push(0);a.each(function(i,a){var t=$(a),o=$.inArray(Math.min.apply(Math,d),d);t.css({width:e,position:"absolute",margin:r/2,top:d[o]+r/2,left:(e+r)*o+s,transition:n.transition||"all 0.5s ease"}),d[o]+=t.innerHeight()+r})};if(i.imageLoaded(a),n.resizable){var t=$(window).on("resize",a);i.on("remove",t.unbind)}}});