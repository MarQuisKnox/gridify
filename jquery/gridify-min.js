!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){n.fn.extend({imagesLoaded:function(i){var t=n(this).find("img"),e=count=t.length;0==count&&i();for(var o=0;e>o;o++){var r=new Image;r.onload=function(){count--,0==count&&i()},r.onerror=function(){count--,0==count&&i()},r.src=t[o].src}},gridify:function(i){var t=n(this),i=i||{},e=function(n){for(var i=0,t=1,e=n.length;e>t;t++)n[t]<n[i]&&(i=t);return i},o=function(){t.css("position","relative");var o=t.find(i.srcNode),r=(i.transition||"all 0.5s ease")+", height 0, width 0",a=t.innerWidth(),f=parseInt(i.margin||0),s=parseInt(i.max_width||i.width||220),d=Math.max(Math.floor(a/(s+f)),1),c=1==d?f/2:a%(s+f)/2,u=[];i.max_width&&(d=Math.ceil(a/(s+f)),s=(a-d*f-f)/d,c=f/2);for(var h=0;d>h;h++)u.push(0);for(var h=0,g=o.length;g>h;h++){var l=n(o[h]),v=e(u);l.css({width:s,position:"absolute",margin:f/2,top:u[v]+f/2,left:(s+f)*v+c,transition:r}),u[v]+=l.innerHeight()+f}};if(t.imagesLoaded(o),i.resizable){var r=n(window).on("resize",o);t.on("remove",r.unbind)}}})});