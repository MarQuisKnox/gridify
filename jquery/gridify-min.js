$.fn.extend({imageLoaded:function(n){var i=$(this).find("img"),t=i.length;0==t&&n(),i.each(function(i,r){var r=new Image;r.onload=function(){t--,0==t&&n()},r.onerror=function(){t--,0==t&&n()},r.src=$(r).attr("src")})},gridify:function(n){var i=$(this),n=n||{},t=function(n){for(var i=0,t=1,r=n.length;r>t;t++)n[t]<n[i]&&(i=t);return i},r=function(){i.css("position","relative");var r=i.find(n.srcNode),a=(n.transition||"all 0.5s ease")+", height 0, width 0",e=i.innerWidth(),o=parseInt(n.margin||0),s=parseInt(n.max_width||n.width||220),h=Math.max(Math.floor(e/(s+o)),1),d=1==h?o/2:e%(s+o)/2,f=[];n.max_width&&(h=Math.ceil(e/(s+o)),s=(e-h*o-o)/h,d=o/2);for(var c=0;h>c;c++)f.push(0);for(var c=0,g=r.length;g>c;c++){var l=$(r[c]),u=t(f);l.css({width:s,position:"absolute",margin:o/2,top:f[u]+o/2,left:(s+o)*u+d,transition:a}),f[u]+=l.innerHeight()+o}};if(i.imageLoaded(r),n.resizable){var a=$(window).on("resize",r);i.on("remove",a.unbind)}}});