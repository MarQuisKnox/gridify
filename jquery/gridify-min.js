$.fn.extend({imageLoaded:function(i){var n=$(this).find("img"),t=n.length;0==t&&i(),n.each(function(n,a){var a=new Image;a.onload=function(){t--,0==t&&i()},a.onerror=function(){t--,0==t&&i()},a.src=$(a).attr("src")})},gridify:function(i){var n=$(this),i=i||{},t=function(){n.css("position","relative");var t=n.find(i.srcNode),a=((i.transition||"all 0.5s ease")+", height 0, width 0",n.innerWidth()),e=parseInt(i.margin||0),r=parseInt(i.max_width||i.width||220),o=Math.max(Math.floor(a/(r+e)),1),s=1==o?e/2:a%(r+e)/2,h=[];i.max_width&&(o=Math.ceil(a/(r+e)),r=(a-o*e-e)/o,s=e/2);for(var d=0;o>d;d++)h.push(0);t.each(function(n,t){var a=$(t),o=$.inArray(Math.min.apply(Math,h),h);a.css({width:r,position:"absolute",margin:e/2,top:h[o]+e/2,left:(r+e)*o+s,transition:i.transition||"all 0.3s ease"}),h[o]+=a.innerHeight()+e})};if(t(),i.resizable){var a=$(window).on("resize",t);n.on("remove",a.unbind)}}});