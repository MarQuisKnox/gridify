Element.prototype.imageLoaded=function(e){var t=this.querySelectorAll("img"),n=t.length;0==n&&e();for(var i=0,r=t.length;r>i;i++){var o=new Image;o.onload=function(){n--,0==n&&e()},o.onerror=function(){n--,0==n&&e()},o.src=t[i].getAttribute("src")}},Element.prototype.gridify=function(e){var t=this,e=e||{},n=function(e){for(var t=0,n=1;n<e.length;n++)e[n]<e[t]&&(t=n);return t},i=function(){t.style.position="relative";var i=t.querySelectorAll(e.srcNode),r=t.clientWidth,o=parseInt(e.margin||0),a=parseInt(e.max_width||e.width||220),d=Math.floor(r/(a+o)),s=r%(a+o)/2,l=[];e.max_width&&(a=(r-d*o-o)/d,s=o/2);for(var v=0;d>v;v++)l.push(0);for(var v=0,w=i.length;w>v;v++){var h=n(l);i[v].setAttribute("style","width: "+a+"px; position: absolute; margin: "+o/2+"px; top: "+(l[h]+o/2)+"px; left: "+((a+o)*h+s)+"px; transition: "+(e.transition||"all 0.5s ease")),l[h]+=i[v].clientHeight+o}};this.imageLoaded(i),e.resizable&&(window.attachEvent?window.attachEvent("onresize",i):window.addEventListener&&window.addEventListener("resize",i,!0),t.addEventListener("DOMNodeRemoved",function(){window.detachEvent?window.detachEvent("onresize",i):window.removeEventListener&&window.removeEventListener("resize",i)}))};